
on_monarch_death = {
	if = {
		limit = {
			tag = ANS
			BRA = {
				has_country_flag = albrecht_achilles_flag
			}
		}
		BRA = {
			clr_country_flag = albrecht_achilles_flag #Just to be sure
			kill_heir = {} #If Albrecht Achilles dies in Ansbach he will also be dead in Brandenburg, will appear as normal death of heir to BRA.
		}
	}
	if = {
		limit = { has_country_modifier = sought_after_bachelor }
		remove_country_modifier = sought_after_bachelor
	}
	if = {
		limit = {
			tag = SAX
			has_country_flag = sax_thuringen_split_to_happen
			OR = {
				NOT = { dynasty = "von Wettin" }
				NOT = { senior_union_with = THU }
				has_regency = yes
			}
		}
		clr_country_flag = sax_thuringen_split_to_happen
	}
	if = {
		limit = { tag = SAM }
		country_event = { id = polynesian.35 }
	}
	if = {
		limit = { tag = TOG }
		country_event = { id = polynesian.36 }
	}
	if = {	# Ascension of Trailokanat	
		limit = { tag = AYU }
		country_event = { id = flavor_suk.1 }
	}
	#if = {
	#	limit = { tag = GOT }
	#	country_event = { id = flavor_got.37 }
	#}
	if = {
		limit = { has_government_attribute = no_stability_loss_on_monarch_death }
		add_stability = 1
	}
	burgundian_inheritance_start_effect = yes
	ladislaus_postumus_king_died_effect = yes
	joan_de_trastamara_king_died_effect = yes
	events = {
		flavor_wal.1 # Vlad the Impaler. So that he doesn't try to usurp his father.
		flavor_nav.4 # Navarra succession event
		flavor_sax.8 # Treaty of Leipzig
		flavor_pap.16 # Borgia Pope
		flavor_pap.19 # death of borgia pope
		flavor_tus.22 # Medici Pope
		flavor_tus.24 # death of the Medici Pope
		majapahit.8 # Majapahit pretenders
		flavor_mal.11 # Mali pretenders
		flavor_mal.47 # Pilgrimage ends prematurely
		government_events.3	# Election of a new Ruler
	}
	#AB
	if = {
		limit = {
			has_reform = japanempire
			legitimacy = 90
		}
		add_stability = 1
	}
	if = {
		limit = {
			has_reform = bultsardom
		}
		country_event = { id = ab_bulgaria.4 }
	}
	if = {
		limit = {
			has_ruler_flag = eng_heir_in_waiting
		}
		clr_ruler_flag = eng_heir_in_waiting
	}
	else = {
		country_event = { id = antebellum_england.1 }
	}
	if = {
		limit = {
			tag = GLH
			NOT = {
				mission_completed = glh_succession
			}
		}
		country_event = { id = ab_ghorde.2 }
	}
	if = {
		limit = {
			tag = NAZ
		}
		country_event = { id = ab_abbasid.2 days = 5 }
	}
	#India
	if = {
		limit = {
			tag = TLG
			has_country_flag = teligana_reddy_influence_2_flag
			NOT = { has_ruler = "Lingama" }
		}
		country_event = { id = abindia_teligana_event.6 }
	}
}
# ROOT = Overlord, FROM = Minor
on_dependency_gained = {
	if = {
		limit = {
			FROM = {
				has_government_attribute = has_dutch_election
			}
		}
		ROOT = {
			country_event = {
				id = dutch_republic.31
			}# States General falls under a PU
		}
	}
	# AB [[[
	#if = {
	#	limit = {
	#		FROM = {
	#			tag = AVE
	#			government_rank = 1
	#		}
	#	}
	#	FROM = {
	#		country_event = {
	#			id = flavor_gbr.20
	#		}
	#	}
	#}
	# ]]]
	#AB
	if = {
		limit = {
			FROM = {
				OR = {
					tag = FEO
					tag = GTH
				}
				is_subject_of = GLH
			}
		}
		FROM = { set_country_flag = feo_was_vassalized }
	}
	if = {
		limit = {
			FROM = {
				OR = {
					tag = MGS
					was_tag = MGS
				}
				is_subject_of_type = tributary_state
			}
		}
		FROM = { set_country_flag = mgs_became_tributary }
	}
	if = {
		limit = {
			FROM = { has_reform = irish_highking_opp }
		}
		FROM = { save_event_target_as = hk_ire }
		country_event = { id = hk_ire.9 } # Foreign power vassalizes HK
		country_event = { id = hk_ire.14 } # Irish minor vassalizes HK
	}
	# Workaround for AI picking Vassalization Peace Option
	# instead of Become Ruirech peace option
	if = {
		limit = {
			ai = yes
			FROM = {
				ai = yes
				NOT = { has_country_modifier = ire_high_king_opp } 
				NOT = { is_subject_of_type = ire_vassal }
				OR = {
					primary_culture = irish
					primary_culture = norse_gael
				}
				capital_scope = {
					OR = {
						area = munster_area
						area = ulster_area
						area = connacht_area
						area = leinster_area
					}
				}
			}
			OR = {
				primary_culture = irish
				primary_culture = norse_gael
			}
			capital_scope = {
				OR = {
					area = munster_area
					area = ulster_area
					area = connacht_area
					area = leinster_area
				}
			}
		}
		FROM = { grant_independence = yes }
		create_subject = {
			subject_type = ire_vassal
			subject = FROM
		}
		FROM = { add_government_reform = irish_ruirech }
	}
	#India
	FROM = {
		# Samsara
		country_event = {
			id = colonial_AUS_india.1
			days = 21
		}
		country_event = {
			id = colonial_AUS_india.2
			days = 21
		}
		country_event = {
			id = colonial_AUS_india.3
			days = 21
		}
		country_event = {
			id = colonial_AUS_india.4
			days = 21
		}
		country_event = {
			id = colonial_AUS_india.5
			days = 21
		}
		country_event = {
			id = colonial_AUS_india.6
			days = 21
		}
	}
}

# THIS = Province, FROM = Country, ROOT = Merc Unit
on_mercenary_recruited = {
	on_mercenary_recruited_effect = yes
	
	#Malankara additions
	if = {
		limit = {
			ROOT = { mercenary_company = abi_merc_malankara_special }
		}
		FROM = {
			add_dip_power = -25
			add_mil_power = -25
		}
	}
}