lha_upgrade_idea_set = {
	if = {
		limit = {
			NOT = {
				OR = {
					tag = LHA
					tag = GPH
				}
			}
		}
		#Guard clause
	}
	else_if = {
		limit = {
			check_variable = {
				which = lha_idea_level
				value = 0
			}
			NOT = {
				check_variable = {
					which = lha_idea_level
					value = 1
				}
			}
		}
		#Increment idea improvement level
		hidden_effect = {
			change_variable = {
				which = lha_idea_level
				value = 1
			}
		}
		custom_tooltip = lha_upgrade_idea_set_tooltip_1
		hidden_effect = {
			swap_free_idea_group = yes
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = lha_idea_level
				value = 1
			}
			NOT = {
				check_variable = {
					which = lha_idea_level
					value = 2
				}
			}
		}
		#Increment idea improvement level
		hidden_effect = {
			change_variable = {
				which = lha_idea_level
				value = 1
			}
		}
		custom_tooltip = lha_upgrade_idea_set_tooltip_2
		hidden_effect = {
			swap_free_idea_group = yes
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = lha_idea_level
				value = 2
			}
			NOT = {
				check_variable = {
					which = lha_idea_level
					value = 3
				}
			}
		}
		#Increment idea improvement level
		hidden_effect = {
			change_variable = {
				which = lha_idea_level
				value = 1
			}
		}
		custom_tooltip = lha_upgrade_idea_set_tooltip_3
		hidden_effect = {
			swap_free_idea_group = yes
		}
	}
	else = {
		custom_tooltip = lha_upgrade_idea_set_tooltip_max
	}
}

lha_rule_indochina_upgrade_effect ={
	random_owned_province = {
		limit = {
			OR = {
				region = indo_china_region
				region = burma_region
				area = north_tenasserim_area
				area = tenasserim_area
			}
			has_production_building_trigger = yes
			NOT = {
				has_province_flag = lha_rule_indochina_upgraded
			}
		}
		set_province_flag = lha_rule_indochina_upgraded
		add_province_modifier = {
			name = lha_indochinese_economic_expansion
			duration = -1
		}
		add_or_upgrade_production_building = yes
	}
}